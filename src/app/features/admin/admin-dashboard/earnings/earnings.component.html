<div class="container mt-4">
  <h2 class="mb-3">üìä Admin Earnings Report</h2>

  <div class="row mb-3">
    <div class="col-md-4">
      <label>Filter By:</label>
      <select class="form-control" [(ngModel)]="filter" (change)="fetchReport()">
        <option *ngFor="let f of filters" [value]="f">{{ f | titlecase }}</option>
      </select>
    </div>

    <div class="col-md-4 d-flex align-items-end">
      <button class="btn btn-success w-100" (click)="downloadReport()">‚¨áÔ∏è Download Excel</button>
      <button class="btn btn-danger w-100 mt-2" (click)="downloadPdf()">‚¨áÔ∏è Download PDF</button>
    </div>
  </div>

  <div class="card p-3 mb-4 shadow">
    <h5>Total Earnings (Booking + Remaining): ‚Çπ{{ totalEarnings }}</h5>
    <h6>Total Booking Amount: ‚Çπ{{ totalBookingAmount }}</h6>
    <h6>Total Remaining Amount: ‚Çπ{{ totalRemainingAmount }}</h6>
    <h6>Total Bookings: {{ totalBookings }}</h6>
  </div>

  <div class="table-responsive shadow">
    <table class="table table-bordered table-striped">
      <thead class="thead-dark">
        <tr>
          <th>Booking ID</th>
          <th>Customer</th>
          <th>Vehicle</th>
          <th>Start Date</th>
          <th>End Date</th>
          <th>Booking Amount</th>
          <th>Remaining Amount</th>
          <th>Total Amount</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let booking of bookings">
          <td>{{ booking._id }}</td>
          <td>{{ booking.userId?.name || 'N/A' }}</td>
          <td>{{ booking.vehicleId?.name || 'N/A' }}</td>
          <td>{{ booking.startDate  | date: 'mediumDate' }}</td>
          <td>{{ booking.endDate | date: 'mediumDate'  }}</td>
          <td>‚Çπ{{ booking.bookingAmount }}</td>
        <td>‚Çπ{{ booking.remainingAmount }}</td>
        <td>‚Çπ{{ booking.totalAmount }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
